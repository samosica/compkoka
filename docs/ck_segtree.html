
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="initial-scale=1.0" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>ck/segtree documentation</title>
</head>

<body class="koka doc body madoko">
<h1><a class="link" href="ck_segtree-source.html"><span class="mo">ck<span class="fslash">/</span>segtree</span></a><a class="link" href="toc.html"><span class="toc-link">&#x25b2;toc</span></a></h1>
<div class="toc code"><ul class="toc"><li><a class="link" href="#type_space_monoid"><span class="kw">struct</span>&nbsp;<span class="tp">monoid</span></a>
</li><li class="nested"><a class="link" href="#int_add_monoid"><span class="kw">fun</span>&nbsp;int<span class="dash">-</span>add<span class="dash">-</span>monoid</a></li><li class="nested"><a class="link" href="#mul"><span class="kw">fun</span>&nbsp;mul</a></li><li class="nested"><a class="link" href="#one"><span class="kw">fun</span>&nbsp;one</a></li><li><a class="link" href="#type_space_segtree"><span class="kw">type</span>&nbsp;<span class="tp">segtree</span></a>
</li><li class="nested"><a class="link" href="#_index_"><span class="kw">fun</span>&nbsp;([])</a></li></ul><ul class="toc"><li class="nested"><a class="link" href="#binsearch"><span class="kw">fun</span>&nbsp;binsearch</a></li><li class="nested"><a class="link" href="#product"><span class="kw">fun</span>&nbsp;product</a></li><li class="nested"><a class="link" href="#segtree"><span class="kw">fun</span>&nbsp;segtree</a></li><li class="nested"><a class="link" href="#set"><span class="kw">fun</span>&nbsp;set</a></li><li class="nested"><a class="link" href="#update"><span class="kw">fun</span>&nbsp;update</a></li></ul></div>
<div class="doc koka comment">
<h1 class="synopsis">Segment tree</h1>



<p class="p noindent" data-line="30"><span data-line="30"></span>Usage:
</p><pre class="koka source"><span class="plaincode">import ck/segtree

// 1. Define a monoid
fun mon(): monoid&lt;int&gt;
  Monoid(0, (+))

fun main()
  // 2. Create a segment tree
  val t = segtree(10, mon())

  // 3. Manipulate it (see below)
  t.set(1, 3)
  t.set(3, 8)
  t.product(0, 10).println // 11
</span><span class="nicecode"><span class="kw">import</span> <a class="doc link" href="ck.html#segtree">ck<span class="fslash">/</span>segtree</a>

<span class="comment">// 1. Define a monoid
</span><span class="kw">fun</span> <a class="pp" href="#mon">mon<span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>mon: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">segtree</span> <span class="tp kw op">:</span> <span class="tp">segtree</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">monoid</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>()<span class="tp kw op">:</span> <a class="pp" href="#type_space_monoid"><span class="tp">monoid</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>monoid: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a><span class="tp sp">&gt;</span>
  <a class="pp" href="#con_space_Monoid"><span class="co">Monoid</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>Monoid: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">one</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">mul</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">monoid</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<span class="number">0</span>, <span class="op">(+)</span>)

<span class="kw">fun</span> main()
  <span class="comment">// 2. Create a segment tree
</span>  <span class="kw">val</span> t <span class="kw">=</span> segtree(<span class="number">10</span>, <a class="pp" href="#mon">mon<span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>mon: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">segtree</span> <span class="tp kw op">:</span> <span class="tp">segtree</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">monoid</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>())

  <span class="comment">// 3. Manipulate it (see below)
</span>  t<span class="kw op">.</span>set(<span class="number">1</span>, <span class="number">3</span>)
  t<span class="kw op">.</span>set(<span class="number">3</span>, <span class="number">8</span>)
  t<span class="kw op">.</span><a class="pp" href="#product">product<span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>product: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">h</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">seg</span> <span class="tp kw op">:</span> <span class="tp">segtree</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">left</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">right</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">read</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><span class="tp">div</span><span class="tp sp">,</span><span class="tp">exn</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></span></a>(<span class="number">0</span>, <span class="number">10</span>)<span class="kw op">.</span>println <span class="comment">// 11
</span></span></pre>


<p class="p noindent" data-line="61"><span data-line="61"></span><span data-line="61"></span>.
</p></div>
<div class="decl" id="type_space_monoid"><div class="header code"><span class="def"><span class="kw">struct</span>&nbsp;<span class="tp"><a class="pp" href="ck_segtree-source.html#type_space_monoid"><span class="tp">monoid</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>monoid: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a></span></span><span class="tp">&lt;<span class="tp tv">a</span>&gt;</span>(<span class="param">one</span> <span class="tp sp">:</span>&nbsp;<span class="tp tv">a</span>,&nbsp;<span class="param">mul</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span>)</div><div class="nested"><div class="decl" id="int_add_monoid"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="ck_segtree-source.html#int_add_monoid">int<span class="dash">-</span>add<span class="dash">-</span>monoid</a></span>()<span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_monoid"><span class="tp">monoid</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>monoid: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core_types.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a><span class="tp sp">&gt;</span></div></div><div class="decl" id="mul"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="ck_segtree-source.html#mul">mul</a></span>( <span class="tp op">^</span><span class="tp tpp">monoid</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_monoid"><span class="tp">monoid</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>monoid: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">a</span><span class="tp sp">)</span></div><div class="doc koka comment">

<p class="p noindent" data-line="66"><span data-line="66"></span>   Automatically generated. Retrieves the <span data-line="66"></span><code class="koka"><a class="pp" href="#mul">mul<span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>mul: <span class="tp kw">forall</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span> <span class="tp sp">(</span><span class="tp tpp">monoid</span> <span class="tp kw op">:</span> <span class="tp">monoid</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp sp">(</span><span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp tv">a</span><span class="tp sp">)</span></span></a></code><span data-line="66"></span> constructor field of the <span data-line="66"></span><code class="koka"><a class="pp" href="#type_space_monoid"><span class="tp">monoid</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>monoid: <span class="co">V</span> <span class="kw op">-&gt;</span> <span class="co">V</span></span></a></code><span data-line="66"></span> type.
</p></div></div><div class="decl" id="one"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="ck_segtree-source.html#one">one</a></span>( <span class="tp op">^</span><span class="tp tpp">monoid</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_monoid"><span class="tp">monoid</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>monoid: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">a</span></div><div class="doc koka comment">

<p class="p noindent" data-line="71"><span data-line="71"></span>   Automatically generated. Retrieves the <span data-line="71"></span><code class="koka"><a class="pp" href="#one">one<span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>one: <span class="tp kw">forall</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span> <span class="tp sp">(</span><span class="tp tpp">monoid</span> <span class="tp kw op">:</span> <span class="tp">monoid</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp tv">a</span></span></a></code><span data-line="71"></span> constructor field of the <span data-line="71"></span><code class="koka"><a class="pp" href="#type_space_monoid"><span class="tp">monoid</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>monoid: <span class="co">V</span> <span class="kw op">-&gt;</span> <span class="co">V</span></span></a></code><span data-line="71"></span> type.
</p></div></div></div></div>
<div class="decl" id="type_space_segtree"><div class="header code"><span class="def"><span class="kw">type</span>&nbsp;<span class="tp"><a class="pp" href="ck_segtree-source.html#type_space_segtree"><span class="tp">segtree</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>segtree: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a></span></span><span class="tp">&lt;<span class="tp tv">h</span>,<span class="tp tv">a</span>&gt;</span></div><div class="nested"><div class="decl" id="_index_"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="ck_segtree-source.html#_index_">([])</a></span>( <span class="tp op">^</span><span class="tp tpp">seg</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_segtree"><span class="tp">segtree</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>segtree: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span>, <span class="tp op">^</span><span class="tp tpp">k</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core_types.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="std_core_types.html#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="std_core_types.html#type_space_div"><span class="tp">div</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>div: <span class="co">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="co">HX</span></span></a><span class="tp sp">&gt;</span> <span class="tp tv">a</span></div><div class="doc koka comment">

<p class="p noindent" data-line="77"><span data-line="77"></span>   Get the <span data-line="77"></span><code class="koka">k</code><span data-line="77"></span>-th element.
   The first element is at position 0 (0-based).
</p></div></div><div class="decl" id="binsearch"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="ck_segtree-source.html#binsearch">binsearch</a></span>( <span class="tp tpp">seg</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_segtree"><span class="tp">segtree</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>segtree: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span>, <span class="tp tpp">p</span> <span class="tp sp">:</span>&nbsp;<span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h1</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="std_core_types.html#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h1</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="std_core_types.html#type_space_div"><span class="tp">div</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>div: <span class="co">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="co">HX</span></span></a><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="pp" href="std_core_types.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>bool: <span class="co">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="std_core_types.html#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="std_core_types.html#type_space_div"><span class="tp">div</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>div: <span class="co">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="co">HX</span></span></a><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="pp" href="std_core_types.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent" data-line="83"><span data-line="83"></span>   Return the largest integer <span data-line="83"></span><code class="koka">k</code><span data-line="83"></span> such that the product from the first element
   (inclusive) to the <span data-line="84"></span><code class="koka">k</code><span data-line="84"></span>-th element (exclusive) holds <span data-line="84"></span><code class="koka">p</code><span data-line="84"></span>.
   The first element is at position 0 (0-based).
   <span data-line="86"></span><code class="koka">p</code><span data-line="86"></span> must be decreasing and the product of the empty interval must hold <span data-line="86"></span><code class="koka">p</code><span data-line="86"></span>.
</p></div></div><div class="decl" id="product"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="ck_segtree-source.html#product">product</a></span>( <span class="tp tpp">seg</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_segtree"><span class="tp">segtree</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>segtree: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span>, <span class="tp tpp">left</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core_types.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>, <span class="tp tpp">right</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core_types.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="std_core_types.html#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="std_core_types.html#type_space_div"><span class="tp">div</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>div: <span class="co">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="co">HX</span></span></a><span class="tp sp">&gt;</span> <span class="tp tv">a</span></div><div class="doc koka comment">

<p class="p noindent" data-line="91"><span data-line="91"></span>   Return the product from the <span data-line="91"></span><code class="koka">left</code><span data-line="91"></span>-th element (inclusive) to <span data-line="91"></span><code class="koka">right</code><span data-line="91"></span>-th element (exclusive).
   The first element is at position 0 (0-based).
</p></div></div><div class="decl" id="segtree"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="ck_segtree-source.html#segtree">segtree</a></span>( <span class="tp tpp">n</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core_types.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>, <span class="tp tpp">mon</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_monoid"><span class="tp">monoid</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>monoid: <span class="co">V</span> <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><a class="pp" href="std_core_types.html#type_space_alloc"><span class="tp">alloc</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>alloc: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <a class="pp" href="#type_space_segtree"><span class="tp">segtree</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>segtree: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div><div class="doc koka comment">

<p class="p noindent" data-line="97"><span data-line="97"></span>   Create a segment tree.
</p></div></div><div class="decl" id="set"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="ck_segtree-source.html#set">set</a></span>( <span class="tp tpp">seg</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_segtree"><span class="tp">segtree</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>segtree: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span>, <span class="tp tpp">k</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core_types.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>, <span class="tp tpp">v</span> <span class="tp sp">:</span>&nbsp;<span class="tp tv">a</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="std_core_types.html#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="std_core_types.html#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>write: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="std_core_types.html#type_space_div"><span class="tp">div</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>div: <span class="co">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="co">HX</span></span></a><span class="tp sp">&gt;</span> <a class="doc link" href="std_core.html#type_space_types"><span class="tp">types</span></a><span class="tp op"><span class="fslash">/</span></span><span class="tp sp">(</span><span class="tp sp">)</span></div><div class="doc koka comment">

<p class="p noindent" data-line="101"><span data-line="101"></span>   Set a value to an element.
   The first element is at position 0 (0-based).
</p></div></div><div class="decl" id="update"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="ck_segtree-source.html#update">update</a></span>( <span class="tp tpp">seg</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="#type_space_segtree"><span class="tp">segtree</span><span class="pc"><span class="mo">ck<span class="fslash">/</span>segtree<span class="fslash last">/</span></span>segtree: <span class="tp sp">(</span><span class="co">H</span>, <span class="co">V</span>) <span class="kw op">-></span> <span class="co">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span>, <span class="tp tpp">k</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core_types.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>int: <span class="co">V</span></span></a>, <span class="tp tpp">f</span> <span class="tp sp">:</span>&nbsp;<span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h1</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="std_core_types.html#type_space_local"><span class="tp">local</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>local: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h1</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="std_core_types.html#type_space_div"><span class="tp">div</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>div: <span class="co">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="co">HX</span></span></a><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="std_core_types.html#type_space_read"><span class="tp">read</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>read: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="std_core_types.html#type_space_write"><span class="tp">write</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>write: <span class="co">H</span> <span class="kw op">-></span> <span class="co">X</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">,</span><a class="pp" href="std_core_types.html#type_space_div"><span class="tp">div</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types<span class="fslash last">/</span></span>div: <span class="co">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="co">HX</span></span></a><span class="tp kw op">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="doc link" href="std_core.html#type_space_types"><span class="tp">types</span></a><span class="tp op"><span class="fslash">/</span></span><span class="tp sp">(</span><span class="tp sp">)</span></div><div class="doc koka comment">

<p class="p noindent" data-line="107"><span data-line="107"></span>   Apply a function to an element.
   The first element is at position 0 (0-based).
</p></div></div></div></div>
<div class="decl" id="-private-imports"><div class="header code"><span class="def"><span class="kw">private import</span>&nbsp;<span class="code"><a class="pp" href="std_core_types.html"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>types</span></span></a></span>, <span class="code"><a class="pp" href="std_core_hnd.html"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash">/</span>hnd</span></span></a></span>, <span class="code"><a class="pp" href="std_core.html"><span class="mo">std<span class="fslash">/</span>core</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core</span></span></a></span></span></div></div>
</body>
</html>

<span data-line=""></span>